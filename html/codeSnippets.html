<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>SWH-WS15/16 - Code</title>
    <meta viewport="width=device-width, initial-scale=1">
    <meta name="author" content="Matthias BrÃ¤uer">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link rel="stylesheet" href="../js/libs/Materialize/dist/css/materialize.css">
    <link rel="stylesheet" href="../js/libs/highlight/styles/default.css">
    <link rel="stylesheet" href="../js/libs/highlight/styles/darkula.css">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="slider"></div>
    <nav id="navbar"></nav>
    <header class="row container">
        <h1 class="col s12">Code</h1>
    </header>
    <main class="container">
        <div class="row">
            <h2>Raspberry Pi</h2>
        </div>
        <div class="row">
            <h3 id="codePlayCd" class="col s12">Musik-Player - play_cd.py</h3>
        </div>
        <div class="row">
            <h3 id="codeLCD" class="col s12">LCD-Display - lcd.py</h3>
        </div>

        <div class="row">
            <h2 id="codeArduino" class="col s12">Arduino - cd_shelf.ino</h2>
        </div>
        <div class="row">
            <pre>
                <code>
                    void setup() {
                        initGlobals();

                        pinMode(A5, INPUT);
                        pinMode(A4, INPUT);
                        pinMode(A0, INPUT);
                        pinMode(A1, INPUT);

                        Serial.begin(9600);
                        matrix.begin(0x70);
                        matrix.setRotation(2);
                        strip.begin();
                        strip.show();

                        drawImage(5);
                    }
                </code>
            </pre>
            <pre>
                <code>
                    void loop() {
                        if(connected){
                            checkForPlaylist();
                            checkGesture();
                            getDataFromPi();
                            delay(50);
                        }else{
                            connected = isConnected();
                            if(connected){
                                initGlobals();
                                colorWipe(strip.Color(255, 0, 0), 50);
                                delay(100);
                                colorWipe(strip.Color(0, 255, 0), 50);
                            }
                            delay(1000);
                        }
                    }
                </code>
            </pre>
            <pre>
                <code>
                    void checkGesture(){
                        int valLeft = analogRead(A5);
                        int valRight = analogRead(A4);

                        if(musicState == -1 && (valLeft > 370 || valRight > 370)){
                            drawImage(5);
                            delay(500);
                            drawImage(4);
                            return;
                        }

                        for(int i = 0; i < 2; i++){
                            if(valLeft > 370 && valRight > 370){
                                if(musicState == 0){
                                    musicState = 1;
                                    play();
                                    delay(1000);
                                }else{
                                    if(musicState == 1){
                                        musicState = 0;
                                        pause();
                                        delay(1000);
                                    }
                                }

                                return;
                            }

                            if(i != 1){
                                delay(100);
                            }
                            valLeft = analogRead(A5);
                            valRight = analogRead(A4);
                        }


                        if(valLeft > 370 && valRight <= 370){
                            delay(300);
                            int val = analogRead(A4);
                            if(val > 370){
                                next();
                                delay(1000);
                            }else{
                                Serial.println("g5");
                                drawVolumeDownAnimation();
                                displayMusicState();
                            }
                            return;
                        }

                        if(valRight > 370 && valLeft <= 370){
                            delay(300);
                            int val = analogRead(A5);
                            if(val > 370){
                                previous();
                                delay(1000);
                            }else{
                                Serial.println("g4");
                                drawVolumeUpAnimation();
                                displayMusicState();
                            }

                            return;
                        }
                        delay(100);
                    }
                </code>
            </pre>
            <pre>
                <code>
                    bool isConnected(){
                        String data = "";
                        while(Serial.available()){
                            delay(50);
                            if (Serial.available() > 0) {
                                char letter = Serial.read();
                                data += letter;
                                }
                            }

                        if(data == "connected"){
                            return true;
                        }else{
                            return false;
                        }
                    }
                </code>
            </pre>
        </div>
        <a href="../cd_shelf.zip" download>Projekt.zip</a>
    </main>
    <footer></footer>

    <script type="text/javascript" src="../js/libs/underscore/underscore.js"></script>
    <script type="text/javascript" src="../js/libs/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="../js/libs/Materialize/dist/js/materialize.js"></script>
    <script type="text/javascript" src="../js/app/addSlider.js"></script>
    <script type="text/javascript" src="../js/app/addNavbar.js"></script>
    <script type="text/javascript" src="../js/app/addFooter.js"></script>
    <script type="text/javascript" src="../js/app/anmation.js"></script>
    <script type="text/javascript" src="../js/libs/highlight/highlight.pack.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>
    <script>
        addSlider([
            {src: "../images/code/code_1.jpg", alt: "test"},
            {src: "../images/code/code_2.jpg", alt: ""},
            {src: "../images/code/code_3.jpg", alt:""}
        ]);
    </script>
</body>
</html>